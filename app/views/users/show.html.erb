<div class="user-profile-container">
  <div class="user-profile">
    <h3 class="user-profile-title">
      Hello <%= @user.first_name %> <%= @user.last_name %>!
    </h3>

    <!-- eventually make these links an AJAX call -->
    <%= link_to "Edit Profile", edit_user_path %>


<!--  AJAX request for Add New Bin -->
<div class="ajax-container">

    <div class="row">
      <div class="text-center">
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#mynewpost">
            Add a Bin
          </button>
      </div>
    </div>
    <br>
    <hr>


    <h4>Your Existing Garbage Bins</h4>
    <div class="row" id="container_posts">
      <!-- <h3>Your Existing Garbage Bins</h3> -->
      <% @user.spaces.each do |space| %>
        <%= link_to "Sell Space(s)", user_space_path(@user, space), class: 'sellspacebutton' %> |
        <%= link_to "Buy Space(s)", transactions_path %><br>
        <%= render space %>
      <% end %>
    </div>


    <!-- Modal  create action -->
      <%= form_for([@user,@space], remote: true) do |f| %>
        <div class="modal fade" id="mynewpost" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">

            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title" id="myModalLabel">Spot</h4>
            </div>

            <div class="modal-body">
              <div class="field">
                <%= f.label :address %><br>
                <%= f.text_area :address, class: "form-control", placeholder: "e.g. 1 Bay St., Toronto" %>
              </div>
              <div class="field">
                <%= f.label :garbage_day %><br>
                <%= f.select(:garbaje_day, ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'], { :class => 'form-control'}) %>
              </div>

            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" id="mynewpostclose">Close</button>
              <%= submit_tag "Create", class: "btn btn-primary" %>
            </div>
          </div>
        </div>
        </div>
      <% end %>
    <!-- Modal -->

   <!-- this is where we are going to AJAX in the sell space from usr/id/spaces/id -->


</div>

<div id="dropsellspacehere">

</div>

<h3>Your Recent Transaction History</h3>
<strong>Spaces Sold</strong><br>
<ul id='sold-spaces'>
  <% @sell_spaces.each do |space| %>
    <li>Address: <%= space.address %></li>
    <% space.sell_transactions.each do |transaction| %>
      <li>Quantity: <%=transaction.quantity%></li>
    <% end %>
  <% end %>
</ul>

<strong>Spaces Bought</strong><br>
<ul id='bought-spaces'>
  <% @buy_spaces.each do |space| %>
    <li>Address: <%= space.address %></li>
    <% space.buy_transactions.each do |transaction| %>
      <li>Quantity: <%=transaction.quantity%></li>
    <% end %>
  <% end %>
</ul>
